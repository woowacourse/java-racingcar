# 1단계 - 세번째 리뷰 요청 - 2022.2.15 (화)

---

안녕하세요! 희봉 : )

말씀 주셨던 것들에 대해 다시 한번 코드들을 변경해 보았어요!

## 수정한 목록

---

### 1. DTO 제거

---

사실 기존에 사용하던 Car를 불편함 없이 잘 사용하다 DTO로 변경했던 건 한 크루의 아이디어 때문이었는데 ..

```
toString으로 표현하는 건 객체 자신인데,
뷰에 따라서 각각 보여주고자 하는 모습이 다를 수 있잖아요?
때문에 DTO로 그 뷰에 해당하는 정보를 toString 으로 가공하는거에요!
```

실제의 말투는 저렇지 않지만 대략 이해한 내용은 그랬던거 같아요
생각해보니 일리있는 생각이기도 했어서 리펙터링 했었어요.

그러나 실제로 제가 사용하는 Car의 toString은 오로지 하나였거든요
그리고 Car의 변경이 있으면  CarDto 클래스도 전파가 되기 때문에
의존에 따른 변경 포인트도 하나 더 추가되는거구요... ㅎㅎ..

그러한 이유로 다시 원래대로 돌렸네요 : )

### 2. 정적 팩터리 메서드에서 빌더 패턴과 DIP에 기초한 MovingStrategy 주입

---

이건 전혀 생각지도 못했던 것인데

생각해보니 다른 움직임 전략이 생기면 그에 따른 Car에 변경이 생기게 되니 `OCP`에 위반이 됩니다 !!

바로 수정을 했어요

서로 다른 생성자가 필요하므로 빌더패턴으로 바꾸었고

자연스레 외부에서 MovingStrategy도 주입이 가능하게끔 했어요

사실 저는 스프링을 한 번.. 훑어..(?) 공부를 해보았기 때문에 DIP 개념에 쪼금 익숙해 있었거든요 !..ㅎㅎ

의존관계 역전에 대해 설명 해주셔서 감사합니다 .. ㅎㅎ `IoC`  !!

### 3. 오버로드된 `isSamePosition`  메서드를 하나로

---

하나로 통합하여 운영 / 테스트 코드에서 사용했어요 !


## 문의 사항

---

### 1. 주석이 허용되는 정도

---

주석을 한 번 달아보았어요, 객체를 `new` 로 생성하는 것을 원하지 않았거든요

접근 제어자를 통해서 막아 놓았지만

현업에서 이 접근 제어자의 의미를 파악하지 못하는 팀원이 있을까봐 주석으로 달아 놓았어요 !

![image](https://user-images.githubusercontent.com/66164361/154077689-7105f016-bd80-469b-b0d2-7e885d397246.png)


---


# 1단계 - 두번째 리뷰요청

---

희봉님 ! 안녕하세요!! 성심껏 리뷰해주어서 감격했어요 ㅠㅠ 답변주신것들에 대해 모두 확인해 보았어요 ! 덕분에 깨달은 것도 많고 리펙터링할 때 봐주는 분이 있으니까 기운이 나더라구요 ㅎㅎ 역시 리뷰는 아무나 하는게 아닌 것 같아요 ㅠ

이번에 추가적으로 리펙터링한 것들은 아래와 같아요!

## 리펙터링 목록
---

### 1. `Random` 대신 `ThreadLocalRandom`
---
멀티 쓰레드에 보다 더 좋은 성능을 나타내는 API로 변경했어요

멀티 쓰레드를 고려하여 `InputView` 를 정적인 유틸리티 클래스에서

동적으로 인스턴스화할 수 있는 클래스로 변경했습니다!

### 2. `Scanner` 에서 `BufferedReader(new InputStreamReader(System.in))` 으로로
---
위와 같은 비슷한 이유로 쓰레드 안정성을 지닌 API로 변경했습니다 !

### 3. 랜덤 생성 방식을 Car 정적 팩토리 메서드로 캡슐화
---
기존에는 테스트를 위하여 Car 객체 외부에서 랜덤으로 이동할 것인지 고정으로 이동할 것인지를 결정했어요

하지만 위와 같이 생성하게 될 경우

`new Car(이름,  어떤_전략으로_이동)` 할 것인지를 매 생성마다 인자로 넘겨야 했기 때문에 정적 메서드로 변경해보았습니다 !

```java
Car.createRandomMovingCar(이름);  // 랜덤으로 움직이는 차
Car.createFixedMovingCar(이름);  // 고정으로 움직이는 차
```

### 4. 중복된 차가 있을시에 예외처리
---
생각해보니 ID가 별도로 있으면 모를까 이름만 있는 상태에서는 같은 이름은 구별을 할 수 없다는 것을 깨달았어요

때문에 이름이 중복될 경우 예외처리를 하였습니다. 그러나 지금 생각해보면 애당초 일급컬렉션을 List가 아닌 Set으로 해서

예외처리가 아닌 원천적으로 중복이 불가능하게 만들었어야 했나 하고 생각이 듭니다 ㅎㅎ..

`Set` 힌트를 주셔서 잘 구현할 수 있었어요!

### 5. 잘못된 입력이 있을 경우 해당 지점부터 입력이 가능하게끔
---

사용자가 오입력하였을 경우 해당 지점부터 입력이 가능하게끔 변경하였어요

이때 함수를 매개변수로 넘겨서 `try-catch` 블럭으로 인한 중복을 처리했습니다

### 6. 시행횟수를 값객체로 전환

---

검증이 필요한 부분인거 같아 해당 클래스도 값 객체로 전환하였습니다 !

## 문의 사항

---

이번주차에도 문의 사항이 있어 질문 드립니다 ! ㅠㅠ.. 답변 가능한 범위 내에서만 주셔도 됩니다 ㅎㅎ..

### 1. 적절한 함수형 인터페이스가 없는 경우, 커스텀으로 만들었는데 적절한지를 모르겠어요
---
Supplier, Consumer와 같은 경우가 아닌

`void -> void ` 를 표현할 수 있는 함수가 필요해서

`Voider` 란 함수형 인터페이스를 사용한 부분이 있습니다

이게 제가 알맞게 사용한 것인지를 모르겠습니다 ㅠ

또 이름이 void to void 이므로 Voider라고 네이밍했는데 .. 어디에 있는 공식적인 단어가 아닌데 허용이 되나요??

### 2.  기억하기 위한 마크다운 파일

제가 질문했던 내용을 최상위 디렉터리에 `QUESTION.MD`라고 별도로 기록을 해놓았는데

이걸 별도로 `docs` 디렉터리로 보관하는게 나을까요?? 이건 프로젝트를 관리하는 크루의.. 재량이겠죠??...하하


---

# 1단계 - 첫번째 리뷰요청

---

안녕하세요 !  잘 부탁드립니다 ㅎㅎ 필즈(Philz)입니다 !

이렇게 공식적으로 코드리뷰를 받아보는 것은 처음인데.. 두근두근! 합니다 ㅎㅎ :)

리뷰를 받을때 궁금한 사항들이 생겨.. 몇가지 질문을 같이 드리고자 합니다 ㅠ
(너무 많으면 생략하셔도 됩니다 ㅠ ㅎㅎ..)

---

### 1. 앵귤러 커밋 컨벤션에서.. 스코프

---

![image](https://user-images.githubusercontent.com/66164361/153561334-1f6cc7ef-62b6-41f5-b5d2-5cc653eebbbe.png)


커밋 메시지를 적을 때 `feat(스코프)` 라고 적는데 이 스코프에는 어떤 내용이 들어가는지 확신이 서지 않습니다 . domain이란 개념으로 받아들여도 될까요?
> 예) feat(Item): 구조 수정

### 2-1.`패키지구조` domain 클래스 안에 패키지가 여러개 있어도 되나요?

---

예를들어 자동차의 움직임을 묘사하는 strategy 패턴 같은 곳을 정의 하는 패키지가 이곳에 오는 지 궁금합니다

### 2-2. `패키지 구조` domain 과 controller, service 등이 있을때 어떻게 나뉘는지 궁금합니다

---

> 아래에서 domain 은 station, line 입니다!

1.
![image](https://user-images.githubusercontent.com/66164361/153560471-29b9e4bb-44bf-467d-a313-a1bc50661077.png)

2.
![image](https://user-images.githubusercontent.com/66164361/153560504-aa3b36c7-e333-4401-a9cc-95a4ef8cc11d.png)

### 3. 실무에서 반드시 자바 빈 프로퍼티 규약을 준수 하나요??

---

제 코드에서 Car는 별도로 CarName 값 객체를 멤버로 두었습니다.
Car객체에서 이름을 반환하고자 할때는 `car.getName()` 을 사용하지만
CarName 에서까지 getter를 사용하면, **name.getName()** 이 되어서 의미상 중복(`name`)이 되기에
`name.get()` 으로 시그니쳐를 정하려고 하는데 실무에서는 어떤지 궁금합니다


### 4. 테스트 코드 작성시 `public` 으로 노출하고 싶지 않았던 메서드를 테스트하게 될 때

---

예전에 혼자서 테스트 코드를 작성할 때 한 번 써보았던 방법인데

외부로 최대한 노출 안시키고자 하는 타협점에서 (그렇다고 리플렉션까지는 가지 않기 위해..)  사용해보았던건데..

`CarTest extends Car` 로 상속받은 후에

`protected` 를 써서 테스트 코드를 한 번 작성해본 적이 있었습니다

이경우 단점으로는 **결국 메서드 시그니쳐가 변경**되지만

장점으로 **그래도 완전히 외부로 노출되지는 않음** 이 된다고 생각했었는데.. 실무에서는 주로 어떻게 접근하는지 궁금합니다



### 5. 실무에서도 값 객체를 많이 활용하나요??

---

넥스트 스텝, 우테코를 통해서 VO라는 개념이 엔티티와는 다르단 것을 알았습니다 !

Car에는 CarName이 있는 것 처럼 실무에서도 값 객체를 통한 검증로직 등을 내부로 감싸서 해결하는 등의 방식을 많이 사용하고 있는지 궁금합니다.. ㅎㅎ..


#### 이상입니다 ! 읽어주셔서 감사해요 ㅠ


